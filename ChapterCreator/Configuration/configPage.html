<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Options</title>
    </head>
    <body>
        <div id="TemplateConfigPage" data-role="page" class="page type-interior pluginConfigurationPage" data-require="emby-input,emby-button,emby-select,emby-checkbox">
            <div data-role="content">
                <div class="content-primary">
                    <form id="TemplateConfigForm">
                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="Intro"> Intro </label>
                            <input id="Intro" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the name the chapter will be named for the intro segment.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="Outro"> Outro </label>
                            <input id="Outro" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the name the chapter will be named for the outro segment.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="Recap"> Recap </label>
                            <input id="Recap" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the name the chapter will be named for the recap segment.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="Preview"> Preview </label>
                            <input id="Preview" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the name the chapter will be named for the preview segment.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="Commercial"> Commercial </label>
                            <input id="Commercial" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the name the chapter will be named for the commercial segment.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="Main"> Main </label>
                            <input id="Main" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the name the chapter will be named for the part between intro and outro.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="Prologue"> Prologue </label>
                            <input id="Prologue" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the name the chapter will be named for the part before the intro segment.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="Epilogue"> Epilogue </label>
                            <input id="Epilogue" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the name the chapter will be named for the part after the outro segment.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="SelectedLibraries"> Limit analysis to the following libraries </label>
                            <input id="SelectedLibraries" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the names of libraries it should create chapter files for, separated by commas. If this field is left blank, all libraries on the server containing movies or television episodes will be used.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="SkippedTvShows"> Skip TV Shows </label>
                            <input id="SkippedTvShows" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the names of tv shows to skip the chapter file creation, separated by commas. You can also skip seasons. Format: "My Show;S01;S02, Another Show, Third Show;S03;S05"</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="SkippedMovies"> Skip Movies </label>
                            <input id="SkippedMovies" type="text" is="emby-input" />
                            <div class="fieldDescription">Enter the names of Movies to skip the chapter file creation, separated by commas. Format: "The Godfather, Spiderman, Matrix"</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="MaxParallelism"> Maximum degree of parallelism </label>
                            <input id="MaxParallelism" type="number" is="emby-input" min="1" />
                            <div class="fieldDescription">Maximum degree of parallelism to use when creating chapter files.</div>
                        </div>

                        <div class="inputContainer">
                            <label class="inputLabel inputLabelUnfocused" for="MaxGap"> Maximum gap between chapters </label>
                            <input id="MaxGap" type="number" is="emby-input" min="0" />
                            <div class="fieldDescription">Maximum gap between chapters in seconds.</div>
                        </div>
                        <div class="checkboxContainer checkboxContainer-withDescription">
                            <label class="emby-checkbox-label">
                                <input id="SkipEmbeddedChapters" type="checkbox" is="emby-checkbox" checked />
                                <span>Skip items with embedded chapters</span>
                            </label>

                            <div class="fieldDescription">If checked, the plugin will skip items with embedded chapters.</div>
                        </div>
                        <div class="checkboxContainer checkboxContainer-withDescription">
                            <label class="emby-checkbox-label">
                                <input id="OverwriteFiles" type="checkbox" is="emby-checkbox" checked />
                                <span>Update chapter files</span>
                            </label>

                            <div class="fieldDescription">If checked, the plugin will update already created files to keep them in sync with Media Segments.</div>
                        </div>
                        <div>
                            <button is="emby-button" type="submit" class="raised button-submit block emby-button">
                                <span>Save</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <script type="text/javascript">
                var TemplateConfig = {
                    pluginUniqueId: "e22fb8f5-bc98-4f76-9be4-87de302a97ea",
                };

                document.querySelector("#TemplateConfigPage").addEventListener("pageshow", function () {
                    Dashboard.showLoadingMsg();
                    ApiClient.getPluginConfiguration(TemplateConfig.pluginUniqueId).then(function (config) {
                        document.querySelector("#Intro").value = config.Intro;
                        document.querySelector("#Outro").value = config.Outro;
                        document.querySelector("#Recap").value = config.Recap;
                        document.querySelector("#Preview").value = config.Preview;
                        document.querySelector("#Commercial").value = config.Commercial;
                        document.querySelector("#Main").value = config.Main;
                        document.querySelector("#Prologue").value = config.Prologue;
                        document.querySelector("#Epilogue").value = config.Epilogue;
                        document.querySelector("#SkipEmbeddedChapters").checked = config.SkipEmbeddedChapters;
                        document.querySelector("#OverwriteFiles").checked = config.OverwriteFiles;
                        document.querySelector("#MaxParallelism").value = config.MaxParallelism;
                        document.querySelector("#MaxGap").value = config.MaxGap;
                        document.querySelector("#SelectedLibraries").value = config.SelectedLibraries;
                        document.querySelector("#SkippedTvShows").value = config.SkippedTvShows;
                        document.querySelector("#SkippedMovies").value = config.SkippedMovies;
                        Dashboard.hideLoadingMsg();
                    });
                });

                document.querySelector("#TemplateConfigForm").addEventListener("submit", function (e) {
                    Dashboard.showLoadingMsg();
                    ApiClient.getPluginConfiguration(TemplateConfig.pluginUniqueId).then(function (config) {
                        config.Intro = document.querySelector("#Intro").value;
                        config.Outro = document.querySelector("#Outro").value;
                        config.Preview = document.querySelector("#Preview").value;
                        config.Recap = document.querySelector("#Recap").value;
                        config.Commercial = document.querySelector("#Commercial").value;
                        config.Main = document.querySelector("#Main").value;
                        config.Prologue = document.querySelector("#Prologue").value;
                        config.Epilogue = document.querySelector("#Epilogue").value;
                        config.OverwriteFiles = document.querySelector("#OverwriteFiles").checked;
                        config.SkipEmbeddedChapters = document.querySelector("#SkipEmbeddedChapters").checked;
                        config.MaxParallelism = document.querySelector("#MaxParallelism").value;
                        config.MaxGap = document.querySelector("#MaxGap").value;
                        config.SelectedLibraries = document.querySelector("#SelectedLibraries").value;
                        config.SkippedTvShows = document.querySelector("#SkippedTvShows").value;
                        config.SkippedMovies = document.querySelector("#SkippedMovies").value;
                        ApiClient.updatePluginConfiguration(TemplateConfig.pluginUniqueId, config).then(function (result) {
                            Dashboard.processPluginConfigurationUpdateResult(result);
                        });
                    });

                    e.preventDefault();
                    return false;
                });
            </script>
        </div>
    </body>
</html>
